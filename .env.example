# Snow Utils Configuration
# Copy to .env and set values for your environment.
#
# Quick Start:
#   1. Copy this file: cp .env.example .env
#   2. Run setup: task snow-utils:setup
#   3. Grant role: snow sql -q "GRANT ROLE SA_ROLE TO USER <your_username>"
#
# Required vs Optional:
#   - Variables without defaults are required by their respective commands
#   - Commands will error if required values are missing
#   - CLI flags override env vars (e.g., --user overrides SA_USER)

# =============================================================================
# Snowflake Connection
# =============================================================================
# Connection name from ~/.snowflake/config.toml
# Run `snow connection list` to see available connections
SNOWFLAKE_DEFAULT_CONNECTION_NAME=default

# Default database context (optional)
SNOWFLAKE_DATABASE=

# =============================================================================
# Snow-Utils Infrastructure (run `task snow-utils:setup` first)
# =============================================================================
# Role for snow-utils operations. Created by snow-utils:setup with scoped
# privileges for creating service users, network rules, and external volumes.
# Default: SA_ROLE
SA_ROLE=SA_ROLE

# Database for snow-utils objects (network rules, auth policies, etc.)
# Created by snow-utils:setup with NETWORKS and POLICIES schemas.
# Default: SNOW_UTILS
SNOW_UTILS_DB=SNOW_UTILS

# =============================================================================
# PAT Management (pat:create, pat:remove)
# =============================================================================
# Service account username. Will be created as TYPE=SERVICE user.
# Naming: uppercase, no spaces, alphanumeric + underscores
# Example: CI_SERVICE_USER, DBT_RUNNER, AIRFLOW_SA
SA_USER=

# Role with privileges to create policies and grant roles.
# Needs: CREATE AUTHENTICATION POLICY, CREATE NETWORK RULE, GRANT ROLE
# Defaults to SA_ROLE if not set. Use ACCOUNTADMIN or SECURITYADMIN if unsure.
SA_ADMIN_ROLE=

# Optional: Custom PAT token name
# Default: {SA_USER}_PAT
# PAT_NAME=

# Optional: Path to .env file where SNOWFLAKE_PASSWORD will be written
# Default: .env in current directory
# DOT_ENV_FILE=/path/to/project/.env

# =============================================================================
# Network Management (networks:create, networks:github, networks:google, etc.)
# =============================================================================
# Network rule name. Created as {NW_RULE_DB}.{NW_RULE_SCHEMA}.{NW_RULE_NAME}
# Naming: uppercase recommended, alphanumeric + underscores
# Example: GITHUB_ACTIONS_RULE, OFFICE_IPS, API_EGRESS
NW_RULE_NAME=

# Database for network rules (defaults to SNOW_UTILS_DB if not set)
NW_RULE_DB=

# Schema for network rules
# Default: NETWORKS (created automatically if missing)
NW_RULE_SCHEMA=NETWORKS

# =============================================================================
# External Volume Management (extvolume:create, extvolume:delete, etc.)
# =============================================================================
# AWS region for S3 bucket and IAM resources
# Default: us-west-2
AWS_REGION=us-west-2

# S3 bucket base name. Final name: {username}-{BUCKET} (with default prefix)
# Naming: lowercase, no underscores, 3-63 chars, DNS-compatible
# Example: iceberg-data, analytics-lake, raw-events
BUCKET=

# Optional: Snowflake external volume name
# Default: {USERNAME}_{BUCKET}_EXTERNAL_VOLUME
# EXTERNAL_VOLUME_NAME=

# Optional: Custom prefix for AWS resources (replaces username)
# Set empty to disable prefix entirely (use --no-prefix flag)
# EXTVOLUME_PREFIX=
